import{u as q,c as qe,_ as Qe,d as st}from"./Preload-N9wPt1oO.js";import{r as f,c as it,R as Se,j as He}from"./index-DY54_yZY.js";import{V as S,A as at,j as N,Z as ve,_ as xe,ac as Ae,ad as Ve,Q as Xe,ae as de,af as he,ag as rt,ah as ct}from"./index-0332b2ed.esm-jLApo5AU.js";const Me=new S,Fe=new S,lt=new S,Ke=new N;function ut(s,n,i){const e=Me.setFromMatrixPosition(s.matrixWorld);e.project(n);const p=i.width/2,b=i.height/2;return[e.x*p+p,-(e.y*b)+b]}function dt(s,n){const i=Me.setFromMatrixPosition(s.matrixWorld),e=Fe.setFromMatrixPosition(n.matrixWorld),p=i.sub(e),b=n.getWorldDirection(lt);return p.angleTo(b)>Math.PI/2}function ht(s,n,i,e){const p=Me.setFromMatrixPosition(s.matrixWorld),b=p.clone();b.project(n),Ke.set(b.x,b.y),i.setFromCamera(Ke,n);const v=i.intersectObjects(e,!0);if(v.length){const c=v[0].distance;return p.distanceTo(i.ray.origin)<c}return!0}function ft(s,n){if(n instanceof xe)return n.zoom;if(n instanceof ve){const i=Me.setFromMatrixPosition(s.matrixWorld),e=Fe.setFromMatrixPosition(n.matrixWorld),p=n.fov*Math.PI/180,b=i.distanceTo(e);return 1/(2*Math.tan(p/2)*b)}else return 1}function mt(s,n,i){if(n instanceof ve||n instanceof xe){const e=Me.setFromMatrixPosition(s.matrixWorld),p=Fe.setFromMatrixPosition(n.matrixWorld),b=e.distanceTo(p),v=(i[1]-i[0])/(n.far-n.near),c=i[1]-v*n.far;return Math.round(v*b+c)}}const Ye=s=>Math.abs(s)<1e-10?0:s;function Je(s,n,i=""){let e="matrix3d(";for(let p=0;p!==16;p++)e+=Ye(n[p]*s.elements[p])+(p!==15?",":")");return i+e}const pt=(s=>n=>Je(n,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),bt=(s=>(n,i)=>Je(n,s(i),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]);function gt(s){return s&&typeof s=="object"&&"current"in s}const yt=f.forwardRef(({children:s,eps:n=.001,style:i,className:e,prepend:p,center:b,fullscreen:v,portal:c,distanceFactor:d,sprite:ae=!1,transform:l=!1,occlude:m,onOcclude:w,castShadow:Y,receiveShadow:z,material:k,geometry:R,zIndexRange:A=[16777271,0],calculatePosition:_=ut,as:H="div",wrapperClass:L,pointerEvents:E="auto",...u},Q)=>{const{gl:D,camera:P,scene:h,size:x,raycaster:De,events:V,viewport:fe}=q(),[O]=f.useState(()=>document.createElement(H)),re=f.useRef(null),T=f.useRef(null),X=f.useRef(0),J=f.useRef([0,0]),F=f.useRef(null),oe=f.useRef(null),K=c?.current||V.connected||D.domElement.parentNode,I=f.useRef(null),se=f.useRef(!1),ce=f.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&gt(m[0]),[m]);f.useLayoutEffect(()=>{const j=D.domElement;m&&m==="blending"?(j.style.zIndex=`${Math.floor(A[0]/2)}`,j.style.position="absolute",j.style.pointerEvents="none"):(j.style.zIndex=null,j.style.position=null,j.style.pointerEvents=null)},[m]),f.useLayoutEffect(()=>{if(T.current){const j=re.current=it.createRoot(O);if(h.updateMatrixWorld(),l)O.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const y=_(T.current,P,x);O.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${y[0]}px,${y[1]}px,0);transform-origin:0 0;`}return K&&(p?K.prepend(O):K.appendChild(O)),()=>{K&&K.removeChild(O),j.unmount()}}},[K,l]),f.useLayoutEffect(()=>{L&&(O.className=L)},[L]);const me=f.useMemo(()=>l?{position:"absolute",top:0,left:0,width:x.width,height:x.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:b?"translate3d(-50%,-50%,0)":"none",...v&&{top:-x.height/2,left:-x.width/2,width:x.width,height:x.height},...i},[i,b,v,x,l]),Re=f.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);f.useLayoutEffect(()=>{if(se.current=!1,l){var j;(j=re.current)==null||j.render(f.createElement("div",{ref:F,style:me},f.createElement("div",{ref:oe,style:Re},f.createElement("div",{ref:Q,className:e,style:i,children:s}))))}else{var y;(y=re.current)==null||y.render(f.createElement("div",{ref:Q,style:me,className:e,children:s}))}});const ee=f.useRef(!0);qe(j=>{if(T.current){P.updateMatrixWorld(),T.current.updateWorldMatrix(!0,!1);const y=l?J.current:_(T.current,P,x);if(l||Math.abs(X.current-P.zoom)>n||Math.abs(J.current[0]-y[0])>n||Math.abs(J.current[1]-y[1])>n){const W=dt(T.current,P);let C=!1;ce&&(Array.isArray(m)?C=m.map(Z=>Z.current):m!=="blending"&&(C=[h]));const te=ee.current;if(C){const Z=ht(T.current,P,De,C);ee.current=Z&&!W}else ee.current=!W;te!==ee.current&&(w?w(!ee.current):O.style.display=ee.current?"block":"none");const le=Math.floor(A[0]/2),_e=m?ce?[A[0],le]:[le-1,0]:A;if(O.style.zIndex=`${mt(T.current,P,_e)}`,l){const[Z,pe]=[x.width/2,x.height/2],ue=P.projectionMatrix.elements[5]*pe,{isOrthographicCamera:we,top:Ie,left:Te,bottom:be,right:ie}=P,Ce=pt(P.matrixWorldInverse),Ne=we?`scale(${ue})translate(${Ye(-(ie+Te)/2)}px,${Ye((Ie+be)/2)}px)`:`translateZ(${ue}px)`;let U=T.current.matrixWorld;ae&&(U=P.matrixWorldInverse.clone().transpose().copyPosition(U).scale(T.current.scale),U.elements[3]=U.elements[7]=U.elements[11]=0,U.elements[15]=1),O.style.width=x.width+"px",O.style.height=x.height+"px",O.style.perspective=we?"":`${ue}px`,F.current&&oe.current&&(F.current.style.transform=`${Ne}${Ce}translate(${Z}px,${pe}px)`,oe.current.style.transform=bt(U,1/((d||10)/400)))}else{const Z=d===void 0?1:ft(T.current,P)*d;O.style.transform=`translate3d(${y[0]}px,${y[1]}px,0) scale(${Z})`}J.current=y,X.current=P.zoom}}if(!ce&&I.current&&!se.current)if(l){if(F.current){const y=F.current.children[0];if(y!=null&&y.clientWidth&&y!=null&&y.clientHeight){const{isOrthographicCamera:W}=P;if(W||R)u.scale&&(Array.isArray(u.scale)?u.scale instanceof S?I.current.scale.copy(u.scale.clone().divideScalar(1)):I.current.scale.set(1/u.scale[0],1/u.scale[1],1/u.scale[2]):I.current.scale.setScalar(1/u.scale));else{const C=(d||10)/400,te=y.clientWidth*C,le=y.clientHeight*C;I.current.scale.set(te,le,1)}se.current=!0}}}else{const y=O.children[0];if(y!=null&&y.clientWidth&&y!=null&&y.clientHeight){const W=1/fe.factor,C=y.clientWidth*W,te=y.clientHeight*W;I.current.scale.set(C,te,1),se.current=!0}I.current.lookAt(j.camera.position)}});const Oe=f.useMemo(()=>({vertexShader:l?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[l]);return f.createElement("group",Qe({},u,{ref:T}),m&&!ce&&f.createElement("mesh",{castShadow:Y,receiveShadow:z,ref:I},R||f.createElement("planeGeometry",null),k||f.createElement("shaderMaterial",{side:at,vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader})))}),Et=s=>s;function Pt(s,n=Et){const i=Se.useSyncExternalStore(s.subscribe,Se.useCallback(()=>n(s.getState()),[s,n]),Se.useCallback(()=>n(s.getInitialState()),[s,n]));return Se.useDebugValue(i),i}const $e=s=>{const n=st(s),i=e=>Pt(n,e);return Object.assign(i,n),i},vt=(s=>s?$e(s):$e);let Pe=0;const xt=vt(s=>(Ae.onStart=(n,i,e)=>{s({active:!0,item:n,loaded:i,total:e,progress:(i-Pe)/(e-Pe)*100})},Ae.onLoad=()=>{s({active:!1})},Ae.onError=n=>s(i=>({errors:[...i.errors,n]})),Ae.onProgress=(n,i,e)=>{i===e&&(Pe=e),s({active:!0,item:n,loaded:i,total:e,progress:(i-Pe)/(e-Pe)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var Mt=Object.defineProperty,Ot=(s,n,i)=>n in s?Mt(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,wt=(s,n,i)=>(Ot(s,n+"",i),i);class Tt{constructor(){wt(this,"_listeners")}addEventListener(n,i){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[n]===void 0&&(e[n]=[]),e[n].indexOf(i)===-1&&e[n].push(i)}hasEventListener(n,i){if(this._listeners===void 0)return!1;const e=this._listeners;return e[n]!==void 0&&e[n].indexOf(i)!==-1}removeEventListener(n,i){if(this._listeners===void 0)return;const p=this._listeners[n];if(p!==void 0){const b=p.indexOf(i);b!==-1&&p.splice(b,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const e=this._listeners[n.type];if(e!==void 0){n.target=this;const p=e.slice(0);for(let b=0,v=p.length;b<v;b++)p[b].call(this,n);n.target=null}}}var jt=Object.defineProperty,St=(s,n,i)=>n in s?jt(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,a=(s,n,i)=>(St(s,typeof n!="symbol"?n+"":n,i),i);const Le=new rt,Be=new ct,At=Math.cos(70*(Math.PI/180)),Ge=(s,n)=>(s%n+n)%n;let Lt=class extends Tt{constructor(n,i){super(),a(this,"object"),a(this,"domElement"),a(this,"enabled",!0),a(this,"target",new S),a(this,"minDistance",0),a(this,"maxDistance",1/0),a(this,"minZoom",0),a(this,"maxZoom",1/0),a(this,"minPolarAngle",0),a(this,"maxPolarAngle",Math.PI),a(this,"minAzimuthAngle",-1/0),a(this,"maxAzimuthAngle",1/0),a(this,"enableDamping",!1),a(this,"dampingFactor",.05),a(this,"enableZoom",!0),a(this,"zoomSpeed",1),a(this,"enableRotate",!0),a(this,"rotateSpeed",1),a(this,"enablePan",!0),a(this,"panSpeed",1),a(this,"screenSpacePanning",!0),a(this,"keyPanSpeed",7),a(this,"zoomToCursor",!1),a(this,"autoRotate",!1),a(this,"autoRotateSpeed",2),a(this,"reverseOrbit",!1),a(this,"reverseHorizontalOrbit",!1),a(this,"reverseVerticalOrbit",!1),a(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),a(this,"mouseButtons",{LEFT:de.ROTATE,MIDDLE:de.DOLLY,RIGHT:de.PAN}),a(this,"touches",{ONE:he.ROTATE,TWO:he.DOLLY_PAN}),a(this,"target0"),a(this,"position0"),a(this,"zoom0"),a(this,"_domElementKeyEvents",null),a(this,"getPolarAngle"),a(this,"getAzimuthalAngle"),a(this,"setPolarAngle"),a(this,"setAzimuthalAngle"),a(this,"getDistance"),a(this,"getZoomScale"),a(this,"listenToKeyEvents"),a(this,"stopListenToKeyEvents"),a(this,"saveState"),a(this,"reset"),a(this,"update"),a(this,"connect"),a(this,"dispose"),a(this,"dollyIn"),a(this,"dollyOut"),a(this,"getScale"),a(this,"setScale"),this.object=n,this.domElement=i,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=t=>{let o=Ge(t,2*Math.PI),r=l.phi;r<0&&(r+=2*Math.PI),o<0&&(o+=2*Math.PI);let g=Math.abs(o-r);2*Math.PI-g<g&&(o<r?o+=2*Math.PI:r+=2*Math.PI),m.phi=o-r,e.update()},this.setAzimuthalAngle=t=>{let o=Ge(t,2*Math.PI),r=l.theta;r<0&&(r+=2*Math.PI),o<0&&(o+=2*Math.PI);let g=Math.abs(o-r);2*Math.PI-g<g&&(o<r?o+=2*Math.PI:r+=2*Math.PI),m.theta=o-r,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",ze),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ze),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(p),e.update(),d=c.NONE},this.update=(()=>{const t=new S,o=new S(0,1,0),r=new Xe().setFromUnitVectors(n.up,o),g=r.clone().invert(),M=new S,$=new Xe,ne=2*Math.PI;return function(){const Ue=e.object.position;r.setFromUnitVectors(n.up,o),g.copy(r).invert(),t.copy(Ue).sub(e.target),t.applyQuaternion(r),l.setFromVector3(t),e.autoRotate&&d===c.NONE&&fe(De()),e.enableDamping?(l.theta+=m.theta*e.dampingFactor,l.phi+=m.phi*e.dampingFactor):(l.theta+=m.theta,l.phi+=m.phi);let B=e.minAzimuthAngle,G=e.maxAzimuthAngle;isFinite(B)&&isFinite(G)&&(B<-Math.PI?B+=ne:B>Math.PI&&(B-=ne),G<-Math.PI?G+=ne:G>Math.PI&&(G-=ne),B<=G?l.theta=Math.max(B,Math.min(G,l.theta)):l.theta=l.theta>(B+G)/2?Math.max(B,l.theta):Math.min(G,l.theta)),l.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,l.phi)),l.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(Y,e.dampingFactor):e.target.add(Y),e.zoomToCursor&&P||e.object.isOrthographicCamera?l.radius=I(l.radius):l.radius=I(l.radius*w),t.setFromSpherical(l),t.applyQuaternion(g),Ue.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(m.theta*=1-e.dampingFactor,m.phi*=1-e.dampingFactor,Y.multiplyScalar(1-e.dampingFactor)):(m.set(0,0,0),Y.set(0,0,0));let ge=!1;if(e.zoomToCursor&&P){let ye=null;if(e.object instanceof ve&&e.object.isPerspectiveCamera){const Ee=t.length();ye=I(Ee*w);const je=Ee-ye;e.object.position.addScaledVector(Q,je),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const Ee=new S(D.x,D.y,0);Ee.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/w)),e.object.updateProjectionMatrix(),ge=!0;const je=new S(D.x,D.y,0);je.unproject(e.object),e.object.position.sub(je).add(Ee),e.object.updateMatrixWorld(),ye=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;ye!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(ye).add(e.object.position):(Le.origin.copy(e.object.position),Le.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(Le.direction))<At?n.lookAt(e.target):(Be.setFromNormalAndCoplanarPoint(e.object.up,e.target),Le.intersectPlane(Be,e.target))))}else e.object instanceof xe&&e.object.isOrthographicCamera&&(ge=w!==1,ge&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/w)),e.object.updateProjectionMatrix()));return w=1,P=!1,ge||M.distanceToSquared(e.object.position)>ae||8*(1-$.dot(e.object.quaternion))>ae?(e.dispatchEvent(p),M.copy(e.object.position),$.copy(e.object.quaternion),ge=!1,!0):!1}})(),this.connect=t=>{e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",We),e.domElement.addEventListener("pointerdown",Te),e.domElement.addEventListener("pointercancel",ie),e.domElement.addEventListener("wheel",U)},this.dispose=()=>{var t,o,r,g,M,$;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",We),(o=e.domElement)==null||o.removeEventListener("pointerdown",Te),(r=e.domElement)==null||r.removeEventListener("pointercancel",ie),(g=e.domElement)==null||g.removeEventListener("wheel",U),(M=e.domElement)==null||M.ownerDocument.removeEventListener("pointermove",be),($=e.domElement)==null||$.ownerDocument.removeEventListener("pointerup",ie),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",ze)};const e=this,p={type:"change"},b={type:"start"},v={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=c.NONE;const ae=1e-6,l=new Ve,m=new Ve;let w=1;const Y=new S,z=new N,k=new N,R=new N,A=new N,_=new N,H=new N,L=new N,E=new N,u=new N,Q=new S,D=new N;let P=!1;const h=[],x={};function De(){return 2*Math.PI/60/60*e.autoRotateSpeed}function V(){return Math.pow(.95,e.zoomSpeed)}function fe(t){e.reverseOrbit||e.reverseHorizontalOrbit?m.theta+=t:m.theta-=t}function O(t){e.reverseOrbit||e.reverseVerticalOrbit?m.phi+=t:m.phi-=t}const re=(()=>{const t=new S;return function(r,g){t.setFromMatrixColumn(g,0),t.multiplyScalar(-r),Y.add(t)}})(),T=(()=>{const t=new S;return function(r,g){e.screenSpacePanning===!0?t.setFromMatrixColumn(g,1):(t.setFromMatrixColumn(g,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(r),Y.add(t)}})(),X=(()=>{const t=new S;return function(r,g){const M=e.domElement;if(M&&e.object instanceof ve&&e.object.isPerspectiveCamera){const $=e.object.position;t.copy($).sub(e.target);let ne=t.length();ne*=Math.tan(e.object.fov/2*Math.PI/180),re(2*r*ne/M.clientHeight,e.object.matrix),T(2*g*ne/M.clientHeight,e.object.matrix)}else M&&e.object instanceof xe&&e.object.isOrthographicCamera?(re(r*(e.object.right-e.object.left)/e.object.zoom/M.clientWidth,e.object.matrix),T(g*(e.object.top-e.object.bottom)/e.object.zoom/M.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function J(t){e.object instanceof ve&&e.object.isPerspectiveCamera||e.object instanceof xe&&e.object.isOrthographicCamera?w=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function F(t){J(w/t)}function oe(t){J(w*t)}function K(t){if(!e.zoomToCursor||!e.domElement)return;P=!0;const o=e.domElement.getBoundingClientRect(),r=t.clientX-o.left,g=t.clientY-o.top,M=o.width,$=o.height;D.x=r/M*2-1,D.y=-(g/$)*2+1,Q.set(D.x,D.y,1).unproject(e.object).sub(e.object.position).normalize()}function I(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function se(t){z.set(t.clientX,t.clientY)}function ce(t){K(t),L.set(t.clientX,t.clientY)}function me(t){A.set(t.clientX,t.clientY)}function Re(t){k.set(t.clientX,t.clientY),R.subVectors(k,z).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(fe(2*Math.PI*R.x/o.clientHeight),O(2*Math.PI*R.y/o.clientHeight)),z.copy(k),e.update()}function ee(t){E.set(t.clientX,t.clientY),u.subVectors(E,L),u.y>0?F(V()):u.y<0&&oe(V()),L.copy(E),e.update()}function Oe(t){_.set(t.clientX,t.clientY),H.subVectors(_,A).multiplyScalar(e.panSpeed),X(H.x,H.y),A.copy(_),e.update()}function j(t){K(t),t.deltaY<0?oe(V()):t.deltaY>0&&F(V()),e.update()}function y(t){let o=!1;switch(t.code){case e.keys.UP:X(0,e.keyPanSpeed),o=!0;break;case e.keys.BOTTOM:X(0,-e.keyPanSpeed),o=!0;break;case e.keys.LEFT:X(e.keyPanSpeed,0),o=!0;break;case e.keys.RIGHT:X(-e.keyPanSpeed,0),o=!0;break}o&&(t.preventDefault(),e.update())}function W(){if(h.length==1)z.set(h[0].pageX,h[0].pageY);else{const t=.5*(h[0].pageX+h[1].pageX),o=.5*(h[0].pageY+h[1].pageY);z.set(t,o)}}function C(){if(h.length==1)A.set(h[0].pageX,h[0].pageY);else{const t=.5*(h[0].pageX+h[1].pageX),o=.5*(h[0].pageY+h[1].pageY);A.set(t,o)}}function te(){const t=h[0].pageX-h[1].pageX,o=h[0].pageY-h[1].pageY,r=Math.sqrt(t*t+o*o);L.set(0,r)}function le(){e.enableZoom&&te(),e.enablePan&&C()}function _e(){e.enableZoom&&te(),e.enableRotate&&W()}function Z(t){if(h.length==1)k.set(t.pageX,t.pageY);else{const r=ke(t),g=.5*(t.pageX+r.x),M=.5*(t.pageY+r.y);k.set(g,M)}R.subVectors(k,z).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(fe(2*Math.PI*R.x/o.clientHeight),O(2*Math.PI*R.y/o.clientHeight)),z.copy(k)}function pe(t){if(h.length==1)_.set(t.pageX,t.pageY);else{const o=ke(t),r=.5*(t.pageX+o.x),g=.5*(t.pageY+o.y);_.set(r,g)}H.subVectors(_,A).multiplyScalar(e.panSpeed),X(H.x,H.y),A.copy(_)}function ue(t){const o=ke(t),r=t.pageX-o.x,g=t.pageY-o.y,M=Math.sqrt(r*r+g*g);E.set(0,M),u.set(0,Math.pow(E.y/L.y,e.zoomSpeed)),F(u.y),L.copy(E)}function we(t){e.enableZoom&&ue(t),e.enablePan&&pe(t)}function Ie(t){e.enableZoom&&ue(t),e.enableRotate&&Z(t)}function Te(t){var o,r;e.enabled!==!1&&(h.length===0&&((o=e.domElement)==null||o.ownerDocument.addEventListener("pointermove",be),(r=e.domElement)==null||r.ownerDocument.addEventListener("pointerup",ie)),nt(t),t.pointerType==="touch"?et(t):Ce(t))}function be(t){e.enabled!==!1&&(t.pointerType==="touch"?tt(t):Ne(t))}function ie(t){var o,r,g;ot(t),h.length===0&&((o=e.domElement)==null||o.releasePointerCapture(t.pointerId),(r=e.domElement)==null||r.ownerDocument.removeEventListener("pointermove",be),(g=e.domElement)==null||g.ownerDocument.removeEventListener("pointerup",ie)),e.dispatchEvent(v),d=c.NONE}function Ce(t){let o;switch(t.button){case 0:o=e.mouseButtons.LEFT;break;case 1:o=e.mouseButtons.MIDDLE;break;case 2:o=e.mouseButtons.RIGHT;break;default:o=-1}switch(o){case de.DOLLY:if(e.enableZoom===!1)return;ce(t),d=c.DOLLY;break;case de.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;me(t),d=c.PAN}else{if(e.enableRotate===!1)return;se(t),d=c.ROTATE}break;case de.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;se(t),d=c.ROTATE}else{if(e.enablePan===!1)return;me(t),d=c.PAN}break;default:d=c.NONE}d!==c.NONE&&e.dispatchEvent(b)}function Ne(t){if(e.enabled!==!1)switch(d){case c.ROTATE:if(e.enableRotate===!1)return;Re(t);break;case c.DOLLY:if(e.enableZoom===!1)return;ee(t);break;case c.PAN:if(e.enablePan===!1)return;Oe(t);break}}function U(t){e.enabled===!1||e.enableZoom===!1||d!==c.NONE&&d!==c.ROTATE||(t.preventDefault(),e.dispatchEvent(b),j(t),e.dispatchEvent(v))}function ze(t){e.enabled===!1||e.enablePan===!1||y(t)}function et(t){switch(Ze(t),h.length){case 1:switch(e.touches.ONE){case he.ROTATE:if(e.enableRotate===!1)return;W(),d=c.TOUCH_ROTATE;break;case he.PAN:if(e.enablePan===!1)return;C(),d=c.TOUCH_PAN;break;default:d=c.NONE}break;case 2:switch(e.touches.TWO){case he.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;le(),d=c.TOUCH_DOLLY_PAN;break;case he.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;_e(),d=c.TOUCH_DOLLY_ROTATE;break;default:d=c.NONE}break;default:d=c.NONE}d!==c.NONE&&e.dispatchEvent(b)}function tt(t){switch(Ze(t),d){case c.TOUCH_ROTATE:if(e.enableRotate===!1)return;Z(t),e.update();break;case c.TOUCH_PAN:if(e.enablePan===!1)return;pe(t),e.update();break;case c.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;we(t),e.update();break;case c.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ie(t),e.update();break;default:d=c.NONE}}function We(t){e.enabled!==!1&&t.preventDefault()}function nt(t){h.push(t)}function ot(t){delete x[t.pointerId];for(let o=0;o<h.length;o++)if(h[o].pointerId==t.pointerId){h.splice(o,1);return}}function Ze(t){let o=x[t.pointerId];o===void 0&&(o=new N,x[t.pointerId]=o),o.set(t.pageX,t.pageY)}function ke(t){const o=t.pointerId===h[0].pointerId?h[1]:h[0];return x[o.pointerId]}this.dollyIn=(t=V())=>{oe(t),e.update()},this.dollyOut=(t=V())=>{F(t),e.update()},this.getScale=()=>w,this.setScale=t=>{J(t),e.update()},this.getZoomScale=()=>V(),i!==void 0&&this.connect(i),this.update()}};const Nt=f.forwardRef(({makeDefault:s,camera:n,regress:i,domElement:e,enableDamping:p=!0,keyEvents:b=!1,onChange:v,onStart:c,onEnd:d,...ae},l)=>{const m=q(u=>u.invalidate),w=q(u=>u.camera),Y=q(u=>u.gl),z=q(u=>u.events),k=q(u=>u.setEvents),R=q(u=>u.set),A=q(u=>u.get),_=q(u=>u.performance),H=n||w,L=e||z.connected||Y.domElement,E=f.useMemo(()=>new Lt(H),[H]);return qe(()=>{E.enabled&&E.update()},-1),f.useEffect(()=>(b&&E.connect(b===!0?L:b),E.connect(L),()=>void E.dispose()),[b,L,i,E,m]),f.useEffect(()=>{const u=P=>{m(),i&&_.regress(),v&&v(P)},Q=P=>{c&&c(P)},D=P=>{d&&d(P)};return E.addEventListener("change",u),E.addEventListener("start",Q),E.addEventListener("end",D),()=>{E.removeEventListener("start",Q),E.removeEventListener("end",D),E.removeEventListener("change",u)}},[v,c,d,E,m,k]),f.useEffect(()=>{if(s){const u=A().controls;return R({controls:E}),()=>R({controls:u})}},[s,E]),f.createElement("primitive",Qe({ref:l,object:E,enableDamping:p},ae))}),zt=()=>{const{progress:s}=xt();return He.jsxs(yt,{children:[He.jsx("span",{}),He.jsxs("p",{className:"font-2l text-white font-medium mt-40",children:[s.toFixed(2),"%"]})]})};export{zt as L,Nt as O};
