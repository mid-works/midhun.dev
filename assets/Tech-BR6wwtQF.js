import{r as i,j as d}from"./index-Bkhnae3G.js";import{u as K,a as W,b as S,_ as Q,c as V,C as tt,P as et}from"./Preload-WccWfBxK.js";import{O as ot,L as rt}from"./Loader-B86miTXd.js";import{B as st,V as T,M as Z,F as P,T as F,a as $,E as Y,b as nt,O as at,c as it}from"./index-0332b2ed.esm-jLApo5AU.js";import{S as lt}from"./SectionWrapper-DnsIyJo6.js";import{t as X}from"./index-6_o5cQ3c.js";import"./Styles-sejEAH3O.js";import"./proxy-QI8eTbGa.js";class ct extends st{constructor(f,m,l,O){super();const p=[],M=[],A=[],b=new T,g=new Z;g.makeRotationFromEuler(l),g.setPosition(m);const B=new Z;B.copy(g).invert(),I(),this.setAttribute("position",new P(p,3)),this.setAttribute("normal",new P(M,3)),this.setAttribute("uv",new P(A,2));function I(){let t,e=[];const s=new T,n=new T;if(f.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const r=f.geometry,j=r.attributes.position,x=r.attributes.normal;if(r.index!==null){const c=r.index;for(t=0;t<c.count;t++)s.fromBufferAttribute(j,c.getX(t)),n.fromBufferAttribute(x,c.getX(t)),E(e,s,n)}else for(t=0;t<j.count;t++)s.fromBufferAttribute(j,t),n.fromBufferAttribute(x,t),E(e,s,n);for(e=y(e,b.set(1,0,0)),e=y(e,b.set(-1,0,0)),e=y(e,b.set(0,1,0)),e=y(e,b.set(0,-1,0)),e=y(e,b.set(0,0,1)),e=y(e,b.set(0,0,-1)),t=0;t<e.length;t++){const c=e[t];A.push(.5+c.position.x/O.x,.5+c.position.y/O.y),c.position.applyMatrix4(g),p.push(c.position.x,c.position.y,c.position.z),M.push(c.normal.x,c.normal.y,c.normal.z)}}function E(t,e,s){e.applyMatrix4(f.matrixWorld),e.applyMatrix4(B),s.transformDirection(f.matrixWorld),t.push(new q(e.clone(),s.clone()))}function y(t,e){const s=[],n=.5*Math.abs(O.dot(e));for(let r=0;r<t.length;r+=3){let j,x,c,R=0,u,h,w,D;const z=t[r+0].position.dot(e)-n,k=t[r+1].position.dot(e)-n,v=t[r+2].position.dot(e)-n;switch(j=z>0,x=k>0,c=v>0,R=(j?1:0)+(x?1:0)+(c?1:0),R){case 0:{s.push(t[r]),s.push(t[r+1]),s.push(t[r+2]);break}case 1:{if(j&&(u=t[r+1],h=t[r+2],w=a(t[r],u,e,n),D=a(t[r],h,e,n)),x){u=t[r],h=t[r+2],w=a(t[r+1],u,e,n),D=a(t[r+1],h,e,n),s.push(w),s.push(h.clone()),s.push(u.clone()),s.push(h.clone()),s.push(w.clone()),s.push(D);break}c&&(u=t[r],h=t[r+1],w=a(t[r+2],u,e,n),D=a(t[r+2],h,e,n)),s.push(u.clone()),s.push(h.clone()),s.push(w),s.push(D),s.push(w.clone()),s.push(h.clone());break}case 2:{j||(u=t[r].clone(),h=a(u,t[r+1],e,n),w=a(u,t[r+2],e,n),s.push(u),s.push(h),s.push(w)),x||(u=t[r+1].clone(),h=a(u,t[r+2],e,n),w=a(u,t[r],e,n),s.push(u),s.push(h),s.push(w)),c||(u=t[r+2].clone(),h=a(u,t[r],e,n),w=a(u,t[r+1],e,n),s.push(u),s.push(h),s.push(w));break}}}return s}function a(t,e,s,n){const r=t.position.dot(s)-n,j=e.position.dot(s)-n,x=r/(r-j);return new q(new T(t.position.x+x*(e.position.x-t.position.x),t.position.y+x*(e.position.y-t.position.y),t.position.z+x*(e.position.z-t.position.z)),new T(t.normal.x+x*(e.normal.x-t.normal.x),t.normal.y+x*(e.normal.y-t.normal.y),t.normal.z+x*(e.normal.z-t.normal.z)))}}}class q{constructor(f,m){this.position=f,this.normal=m}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}const G=o=>o===Object(o)&&!Array.isArray(o)&&typeof o!="function";function N(o,f){const m=K(p=>p.gl),l=W(F,G(o)?Object.values(o):o);return i.useLayoutEffect(()=>{f?.(l)},[f]),i.useEffect(()=>{if("initTexture"in m){let p=[];Array.isArray(l)?p=l:l instanceof $?p=[l]:G(l)&&(p=Object.values(l)),p.forEach(M=>{M instanceof $&&m.initTexture(M)})}},[m,l]),i.useMemo(()=>{if(G(o)){const p={};let M=0;for(const A in o)p[A]=l[M++];return p}else return l},[o,l])}N.preload=o=>W.preload(F,o);N.clear=o=>W.clear(F,o);function ut(o){return Array.isArray(o)}function L(o=[0,0,0]){return ut(o)?o:o instanceof T||o instanceof Y?[o.x,o.y,o.z]:[o,o,o]}const ft=i.forwardRef(function({debug:f,depthTest:m=!1,polygonOffsetFactor:l=-10,map:O,mesh:p,children:M,position:A,rotation:b,scale:g,...B},I){const E=i.useRef(null);i.useImperativeHandle(I,()=>E.current);const y=i.useRef(null),a=i.useRef({position:new T,rotation:new Y,scale:new T(1,1,1)});return i.useLayoutEffect(()=>{const t=p?.current||E.current.parent,e=E.current;if(!(t instanceof nt))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');if(t){S(a.current,{position:A,scale:g});const s=t.matrixWorld.clone();if(t.matrixWorld.identity(),!b||typeof b=="number"){const n=new at;n.position.copy(a.current.position);const r=t.geometry.attributes.position.array;t.geometry.attributes.normal===void 0&&t.geometry.computeVertexNormals();const j=t.geometry.attributes.normal.array;let x=1/0,c=new T;const R=n.position.x,u=n.position.y,h=n.position.z,w=r.length;let D=-1;for(let z=0;z<w;z+=3){const k=r[z],v=r[z+1],J=r[z+2],C=k-R,H=v-u,U=J-h,_=C*C+H*H+U*U;_<x&&(x=_,D=z)}c.fromArray(j,D),n.lookAt(n.position.clone().add(c)),n.rotateZ(Math.PI),n.rotateY(Math.PI),typeof b=="number"&&n.rotateZ(b),S(a.current,{rotation:n.rotation})}else S(a.current,{rotation:b});return y.current&&S(y.current,a.current),e.geometry=new ct(t,a.current.position,a.current.rotation,a.current.scale),t.matrixWorld=s,()=>{e.geometry.dispose()}}},[p,...L(A),...L(g),...L(b)]),i.useLayoutEffect(()=>{y.current&&y.current.traverse(t=>t.raycast=()=>null)},[f]),i.createElement("mesh",Q({ref:E,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":l,"material-depthTest":m,"material-map":O},B),M,f&&i.createElement("mesh",{ref:y},i.createElement("boxGeometry",null),i.createElement("meshNormalMaterial",{wireframe:!0}),i.createElement("axesHelper",null)))}),mt=i.forwardRef(({children:o,enabled:f=!0,speed:m=1,rotationIntensity:l=1,floatIntensity:O=1,floatingRange:p=[-.1,.1],autoInvalidate:M=!1,...A},b)=>{const g=i.useRef(null);i.useImperativeHandle(b,()=>g.current,[]);const B=i.useRef(Math.random()*1e4);return V(I=>{var E,y;if(!f||m===0)return;M&&I.invalidate();const a=B.current+I.clock.elapsedTime;g.current.rotation.x=Math.cos(a/4*m)/8*l,g.current.rotation.y=Math.sin(a/4*m)/8*l,g.current.rotation.z=Math.sin(a/4*m)/20*l;let t=Math.sin(a/4*m)/10;t=it.mapLinear(t,-.1,.1,(E=p?.[0])!==null&&E!==void 0?E:-.1,(y=p?.[1])!==null&&y!==void 0?y:.1),g.current.position.y=t*O,g.current.updateMatrix()}),i.createElement("group",A,i.createElement("group",{ref:g,matrixAutoUpdate:!1},o))}),pt=o=>{const[f]=N([o.imgUrl]);return d.jsxs(mt,{speed:1.75,rotationIntensity:1,floatIntensity:2,children:[d.jsx("ambientLight",{intensity:.5}),d.jsx("directionalLight",{position:[0,0,.05]}),d.jsxs("mesh",{castShadow:!0,receiveShadow:!0,scale:2.75,children:[d.jsx("icosahedronGeometry",{args:[1,1]}),d.jsx("meshStandardMaterial",{color:"#fff8eb",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),d.jsx(ft,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],scale:1,map:f,flatShading:!0})]})]})},dt=()=>{const{gl:o}=K();return i.useEffect(()=>{const f=window.innerWidth<=768;o.setPixelRatio(f?1:Math.min(window.devicePixelRatio,2))},[o]),null},ht=({icon:o})=>d.jsxs(tt,{frameloop:"demand",gl:{preserveDrawingBuffer:!1},children:[d.jsx(dt,{})," ",d.jsxs(i.Suspense,{fallback:d.jsx(rt,{}),children:[d.jsx(ot,{enableZoom:!1}),d.jsx(pt,{imgUrl:o})]}),d.jsx(et,{all:!0})]}),xt=()=>{const[o,f]=i.useState(2);return i.useEffect(()=>{const m=setInterval(()=>{f(l=>l>=X.length?(clearInterval(m),l):l+2)},800);return()=>clearInterval(m)},[]),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("h2",{className:"text-secondary text-3xl font-bold mb-10",children:"Knowledge Base"}),d.jsx("div",{className:"flex flex-row flex-wrap justify-center gap-10",children:X.slice(0,o).map(m=>d.jsx("div",{className:"w-28 h-28",children:d.jsx(ht,{icon:m.icon})},m.name))})]})},Tt=lt(xt,"");export{Tt as default};
